{% extends "cast/bootstrap5/base.html" %}

{% block title %}Content Preview - Micropub{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css">
{% endblock %}

{% block content %}
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-lg-8 col-md-10">
        <div class="card shadow-sm border-0 mb-4">
          <div class="card-header bg-primary text-white">
            <h4 class="mb-0">
              <i class="bi bi-eye me-2"></i>Content Preview
            </h4>
          </div>
          <div class="card-body p-4">
            <div class="preview-content bg-light rounded p-4 mb-3">
              {{ preview_html|safe }}
            </div>
          </div>
        </div>

        <div class="card shadow-sm border-0">
          <div class="card-header bg-secondary bg-opacity-10">
            <h5 class="mb-0">
              <i class="bi bi-code-square me-2"></i>Stream Blocks Debug
            </h5>
          </div>
          <div class="card-body">
                    <pre class="bg-dark text-light p-3 rounded mb-0"><code>{{ blocks|pprint }}</code></pre>
          </div>
        </div>

        <div class="text-center mt-4">
          <button class="btn btn-primary" onclick="window.close()">
            <i class="bi bi-x-circle me-2"></i>Close Preview
          </button>
        </div>
      </div>
    </div>
  </div>

  <style>
    .preview-content {
      min-height: 200px;
      font-size: 1.05rem;
      line-height: 1.7;
    }

    .preview-content h1,
    .preview-content h2,
    .preview-content h3 {
      margin-top: 1.5rem;
      margin-bottom: 1rem;
      font-weight: 600;
    }

    .preview-content p {
      margin-bottom: 1rem;
    }

    .preview-content code {
      background-color: rgba(0, 0, 0, 0.05);
      padding: 0.2rem 0.4rem;
      border-radius: 0.25rem;
      font-size: 0.9em;
    }

    .preview-content pre {
      background-color: #2d2d2d;
      color: #f8f8f2;
      padding: 1rem;
      border-radius: 0.5rem;
      overflow-x: auto;
    }

    .preview-content pre code {
      background-color: transparent;
      padding: 0;
      font-size: 0.875rem;
    }

    pre.bg-dark {
      font-size: 0.875rem;
      max-height: 300px;
      overflow-y: auto;
    }
  </style>
{% endblock %}
